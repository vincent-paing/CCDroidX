import dev.aungkyawpaing.ccdroidx.common.BuildState;
import dev.aungkyawpaing.ccdroidx.common.BuildStatus;
import java.time.ZonedDateTime;

CREATE TABLE ProjectTable (
    id INTEGER PRIMARY KEY,
    name TEXT NOT NULL,
    activity TEXT AS BuildState  NOT NULL,
    lastBuildStatus INTEGER AS BuildStatus NOT NULL,
    lastBuildLabel TEXT,
    lastBuildTime INTEGER AS ZonedDateTime NOT NULL,
    nextBuildTime INTEGER AS ZonedDateTime,
    webUrl TEXT NOT NULL,
    feedUrl TEXT NOT NULL,
    isMuted INTEGER AS Boolean NOT NULL DEFAULT 0,
    mutedUntil INTEGER AS ZonedDateTime DEFAULT NULL,
    username TEXT DEFAULT NULL,
    password TEXT DEFAULT NULL
);

insert:
INSERT INTO ProjectTable(name, activity, lastBuildStatus, lastBuildLabel, lastBuildTime, nextBuildTime, webUrl, feedUrl, username, password)
VALUES (:name, :activity, :lastBuildStatus, :lastBuildLabel, :lastBuildTime, :nextBuildTime, :webUrl, :feedUrl, :username, :password);

update:
UPDATE ProjectTable SET name = :name, activity = :activity, lastBuildStatus = :lastBuildStatus, lastBuildLabel = :lastBuildLabel,
lastBuildTime = :lastBuildTime, nextBuildTime = :nextBuildTime, webUrl = :webUrl, feedUrl = :feedUrl,username = :username, password = :password WHERE id = :id;

updateMute:
UPDATE ProjectTable SET isMuted=:isMuted, mutedUntil=:mutedUnti WHERE id = :id;

selectAll:
SELECT * FROM ProjectTable
ORDER BY
lastBuildStatus DESC,
lastBuildTime DESC,
id;

selectById:
SELECT * FROM ProjectTable
WHERE id = :id;

delete:
DELETE FROM ProjectTable WHERE id = :id;